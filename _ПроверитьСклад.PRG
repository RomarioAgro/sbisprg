Функция _ПроверитьСклад(пНомСкл,пНН,пНомРод)
{
   оСклад=НайтиСклад("СКЛАД-N"+пНомСкл);
   оКртНом=Лицо(пНН,"Ном");
#   оКртСкл=Объект("Складская картотека");
   Очистить(оКртСкл);
   'оКртСкл.N склада'=пНомСкл;
   Связать('оКртСкл.Номенклатура-Склад',оКртНом);
   Если(Найти(оКртСкл,"Номенклатура-Склад")<=0)
   {
      Очистить(оКртСкл);
      'оКртСкл.N склада'=пНомСкл;
      Связать(оКртСкл.Склады,оСклад);
      Связать('оКртСкл.Номенклатура-Склад',оКртНом);
      оКртСкл.Наименование = оКртНом.Наименование;
      Если(ЭтоУзел(оКртНом.Лицо_)) Узел(оКртСкл);
      Добавить(оКртСкл);
   }
   Если(пНомРод!="" И 'оКртСкл.Склады>Номенклатура-Склад.НомНомер'!=пНомРод)
   {
#      Сообщить('оКртСкл.Склады>Номенклатура-Склад.НомНомер');
      оРздНом=Лицо(пНомРод,"Ном");
#      оРздСкл=Объект("Складская картотека");
      Очистить(оРздСкл);
      'оРздСкл.N склада'=пНомСкл;
      Связать('оРздСкл.Номенклатура-Склад',оРздНом);
      Найти(оРздСкл,"Номенклатура-Склад")
      Если(оРздСкл.НомНомер==пНомРод)
      {
         Если(ЭтоУзел(оКртНом.Лицо_)) { Лист(оКртСкл); Сохранить(оКртСкл); }
         Связать(оКртСкл.Склады,оРздСкл);
         Если(ЭтоУзел(оКртНом.Лицо_)) { Узел(оКртСкл); Сохранить(оКртСкл); }
         Сохранить(оКртСкл);
      }
   
   }
   Вернуть оКртНом;
}
