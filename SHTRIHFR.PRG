Функция _ШтрихФРФ_Состояние(...)
{
#   Запустить( "command.com /c del fr\\fr_err.txt" );
   Запустить( "c:\\fr\\runfr.exe СОСТОЯНИЕ@" );
   оШтрихЛог = Объект( "c:\\fr\\fr_err.txt");
   i = 0; СтрокаСостояния = "";
   Пока( Следующий( оШтрихЛог ) И i < 2 )
   {
      СтрокаСостояния += оШтрихЛог.Строка + "\n";
      i ++;
   }
   Если( СтрокаСостояния == "" )
      СтрокаСостояния = "ФИСКАЛЬНЫЙ РЕГИСТРАТОР НЕ ВКЛЮЧЕН ИЛИ\n" +
                        "НЕ ЗАГРУЖЕНА ПРОГРАММА ОБМЕНА !";
   Сообщить( СтрокаСостояния );
   Вернуть 1;
}

Функция _ШтрихФРФ_СостЧек(...)
{
   Запустить( "c:\\fr\\runfr.exe СОСТОЯНИЕ@" );
   оШтрихЛог = Объект( "c:\\fr\\fr_err.txt");
   i = 0; СтрокаСостояния = "";
   Пока( Следующий( оШтрихЛог ) И i < 2 )
   {
      СтрокаСостояния += оШтрихЛог.Строка + "\n";
      i ++;
   }
   Если( СтрокаСостояния == "" )
      СтрокаСостояния = "ФИСКАЛЬНЫЙ РЕГИСТРАТОР НЕ ВКЛЮЧЕН ИЛИ\n" +
                        "НЕ ЗАГРУЖЕНА ПРОГРАММА ОБМЕНА !";

   @индсост = СтрокаСостояния;
   Вернуть 1;
}

Функция off_ШтрихФРФ_X(...)
{
   Если( ДаНет( "Печатается отчет кассира без гашения ?" ) )
   {
      Запустить( "c:\\fr\\runfr.exe X_ОТЧЕТ@" );
      _ШтрихФРФ_Состояние();
   }
   Вернуть 1;
}

Функция off_ШтрихФРФ_Z(...)
{
   Если( ДаНет( "ВНИМАНИЕ !!!\nПечатается отчет кассира с гашением ?" ) )
   Если( ДаНет( "Печатать отчет ?" ) )
   {
      Запустить( "c:\\fr\\runfr.exe Z_ОТЧЕТ@" );
      _ШтрихФРФ_Состояние();
   }
   Вернуть 1;
}

Функция _ШтрихФРФ_Ящик(...)
{
   Запустить( "c:\\fr\\runfr.exe ОТКРЫТЬ_ЯЩИК@" );
   Вернуть 1;
}

Функция _ВыгрузкаПродаж3()
{
   ТВ1 = ТекВремя;
   #
   ВывестиСтатус("Подождите ...",1);
   пСч1 = 0;
   ДляВсех(Товаров(13,"")) пСч1++;
   ВывестиСтатус("Подождите ... Идет выгрузка складской картотеки",пСч1);
   Запустить( "c:\\command.com /c del skladall.txt", 1 );
   оФайл = Объект("skladall.txt");
   пСч2 = 0;
   ДляВсех(Товаров(13,""))
   {
      оФайл.Строка = НомНомер+";"+Наименование+";"+Блок1+";"+Блок2+";"+Цена1+";"+Цена2+";"+Цена3+";"+Цена4+";";
      Добавить( оФайл );
      Очистить( оФайл );
      пСч2++; ВывестиСтатус(пСч2);
   }
   ТВ2 = ТекВремя;
   ТВ3 = ТВ2 - ТВ1;
   Сообщить( Текст( ТВ1, "ВРЕМЯ (чч:мм:сс)") + "\n" +
             Текст( ТВ2, "ВРЕМЯ (чч:мм:сс)") + "\n" +
             Текст( ТВ3, "ВРЕМЯ (чч:мм:сс)") )
   Вернуть( ТВ3 );
}